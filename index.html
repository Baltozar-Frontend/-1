<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Telegram Desktop Clone</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/gun/gun.js"></script>
    <style>
        body {
            background-color: #afbecc;
            background-image: url('https://user-images.githubusercontent.com/15075759/28719144-86dc0f70-73b1-11e7-911d-60d70fcded21.png');
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        }
        .chat-shadow { box-shadow: 0 1px 2px rgba(0,0,0,0.2); }
        .my-msg { background-color: #eeffde; border-radius: 12px 12px 0 12px; }
        .other-msg { background-color: #ffffff; border-radius: 12px 12px 12px 0; }
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-thumb { background: #c2cbd2; border-radius: 10px; }
    </style>
</head>
<body class="h-screen flex items-center justify-center">

    <div class="w-full max-w-[1000px] h-full md:h-[90vh] bg-white flex overflow-hidden shadow-2xl md:rounded-lg">
        
        <div class="w-80 border-r border-gray-200 hidden md:flex flex-col bg-white">
            <div class="p-3 border-b flex items-center gap-3">
                <div class="w-10 h-10 bg-[#3390ec] rounded-full flex items-center justify-center text-white font-bold text-xl">‚â°</div>
                <input type="text" placeholder="–ü–æ–∏—Å–∫" class="flex-grow bg-[#f1f1f1] rounded-full py-1.5 px-4 text-sm outline-none">
            </div>
            <div class="overflow-y-auto flex-grow">
                <div class="p-3 bg-[#3390ec] text-white flex items-center gap-3 cursor-pointer">
                    <div class="w-12 h-12 bg-orange-500 rounded-full flex items-center justify-center text-xl font-bold">A</div>
                    <div class="flex-grow">
                        <p class="font-semibold text-sm">–ê—Ä–±–∏—Ç—Ä–∞–∂ –ß–∞—Ç üöÄ</p>
                        <p class="text-xs opacity-80">–û–±–ª–∞—á–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ...</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="flex-grow flex flex-col bg-[#9db1c3]/40 relative">
            
            <div class="h-[56px] bg-white flex items-center px-4 justify-between border-b chat-shadow z-10">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 bg-orange-500 rounded-full flex items-center justify-center text-white font-bold">A</div>
                    <div>
                        <p class="font-bold text-sm">–ê—Ä–±–∏—Ç—Ä–∞–∂ –ß–∞—Ç üöÄ</p>
                        <p id="status" class="text-xs text-[#3390ec]">–≤ —Å–µ—Ç–∏</p>
                    </div>
                </div>
                <div class="text-gray-400 cursor-pointer text-xl font-bold italic">...</div>
            </div>

            <div id="messages" class="flex-grow overflow-y-auto p-4 space-y-3">
                </div>

            <div class="p-3 bg-white flex items-center gap-2">
                <div class="p-2 text-gray-400 cursor-pointer hover:bg-gray-100 rounded-full">üìé</div>
                <input id="input" type="text" placeholder="–ù–∞–ø–∏—Å–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ..." class="flex-grow py-2 outline-none text-[15px]">
                <button id="send" class="p-2 text-[#3390ec] hover:bg-blue-50 rounded-full transition transform active:scale-95">
                    <svg viewBox="0 0 24 24" class="w-7 h-7 fill-current"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"></path></svg>
                </button>
            </div>
        </div>
    </div>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º Gun (–∏—Å–ø–æ–ª—å–∑—É–µ–º –ø—É–±–ª–∏—á–Ω—ã–µ —É–∑–ª—ã –¥–ª—è —Å–≤—è–∑–∏)
        const gun = Gun(['https://gun-manhattan.herokuapp.com/gun']);
        const chat = gun.get('arbitrage_chat_pro_2024');

        const userAlias = "User_" + Math.floor(Math.random() * 999);
        const input = document.getElementById('input');
        const sendBtn = document.getElementById('send');
        const messagesDiv = document.getElementById('messages');

        // –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
        function sendMessage() {
            if (!input.value.trim()) return;
            chat.set({
                name: userAlias,
                msg: input.value,
                time: new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})
            });
            input.value = '';
        }

        sendBtn.onclick = sendMessage;
        input.onkeypress = (e) => { if(e.key === 'Enter') sendMessage() };

        // –°–ª—É—à–∞–µ–º –Ω–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
        chat.map().once((data) => {
            if (!data || !data.msg) return;
            
            const isMine = data.name === userAlias;
            const msgHtml = `
                <div class="flex ${isMine ? 'justify-end' : 'justify-start'}">
                    <div class="${isMine ? 'my-msg' : 'other-msg'} px-3 py-1.5 shadow-sm max-w-[80%] relative">
                        ${!isMine ? `<p class="text-[12px] font-bold text-[#3390ec] mb-0.5">${data.name}</p>` : ''}
                        <div class="flex items-end gap-2">
                            <span class="text-[15px] leading-tight text-black">${data.msg}</span>
                            <span class="text-[10px] text-gray-400 mb-[-2px]">${data.time}</span>
                        </div>
                    </div>
                </div>
            `;
            messagesDiv.insertAdjacentHTML('beforeend', msgHtml);
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        });
    </script>
</body>
</html>
